/**
 * universe-bg
 * @version v0.0.9 - 2015-07-24
 * @link http://html5beta.com/apps/universe.html
 * @author ZHAO Xudong (zxdong@gmail.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t,n){function o(e){this.init(e),this.animate(),this.event()}o.defaults={size:5,starNumber:1e4,color:16777215},o.prototype.init=function(n){var i=n||{},a=this;a.options={size:i.size||o.defaults.size,id:i.id,starNumber:i.starNumber||o.defaults.starNumber,color:i.color||o.defaults.color},a.container=i.container||t.body,i=a.options,a.state={mouseX:0,mouseY:0,width:i.width||e.innerWidth,height:i.height||e.innerHeight,windowHalfX:(i.width||e.innerWidth)/2,windowHalfY:(i.height||e.innerHeight)/2},a.scene=new THREE.Scene,a.camera=new THREE.PerspectiveCamera(50,a.state.width/a.state.height,150,4e3);for(var r=new THREE.Geometry,s=0;s<i.starNumber;s++){var d=new THREE.Vector3;d.x=THREE.Math.randFloatSpread(4e3),d.y=THREE.Math.randFloatSpread(4e3),d.z=THREE.Math.randFloatSpread(4e3);var c=new THREE.Math.Sphere(d,a.options.size/2);r.vertices.push(c)}var u=new THREE.PointCloud(r,new THREE.PointCloudMaterial({color:i.color,size:i.size}));a.scene.add(u),a.renderer=new THREE.WebGLRenderer({antialias:!0}),a.renderer.setPixelRatio(e.devicePixelRatio),a.renderer.setSize(a.state.width,a.state.height),a.renderer.domElement.id=i.id||"id"+(new Date).getTime(),a.container.appendChild(a.renderer.domElement),a.renderer.autoClear=!1},o.prototype.render=function(){var e=5e-4*Date.now(),t=this;t.camera.fov=35+90*Math.sin(.5*e),t.camera.updateProjectionMatrix(),t.camera.position.x+=.02*(t.state.mouseX-t.camera.position.x),t.camera.position.y+=.02*(-t.state.mouseY-t.camera.position.y),t.camera.lookAt(t.scene.position),t.renderer.clear(),t.renderer.setViewport(0,0,t.state.width,t.state.height),t.renderer.render(t.scene,t.camera)},o.prototype.animate=function(){function e(){requestAnimationFrame(e),t.render()}var t=this;e()},o.prototype.event=function(){var n=this;t.addEventListener("mousemove",n.onDocumentMouseMove(),!1),t.addEventListener("touchstart",n.onDocumentTouchStart(),!1),t.addEventListener("touchmove",n.onDocumentTouchMove(),!1),e.addEventListener("resize",n.onWindowResize(),!1)},o.prototype.onDocumentMouseMove=function(){var e=this;return function(t){e.state.mouseX=t.clientX-e.state.windowHalfX,e.state.mouseY=t.clientY-e.state.windowHalfY}},o.prototype.onDocumentTouchStart=function(){var e=this;return function(t){1===t.touches.length&&(t.preventDefault(),e.state.mouseX=t.touches[0].pageX-e.state.windowHalfX,e.state.mouseY=t.touches[0].pageY-e.state.windowHalfY)}},o.prototype.onDocumentTouchMove=function(){var e=this;return function(t){1===t.touches.length&&(t.preventDefault(),e.state.mouseX=t.touches[0].pageX-e.state.windowHalfX,e.state.mouseY=t.touches[0].pageY-e.state.windowHalfY)}},o.prototype.onWindowResize=function(){var t=this;return function(){t.state.width=e.innerWidth,t.state.height=e.innerHeight,t.state.windowHalfX=e.innerWidth/2,t.state.windowHalfY=e.innerHeight/2,t.renderer.setSize(t.state.width,t.state.height),t.camera.aspect=t.state.width/t.state.height,t.camera.updateProjectionMatrix()}},e.Universe=o}(window,document);